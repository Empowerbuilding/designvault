{"version":3,"sources":["../src/components/DesignVault.tsx","../src/components/ArchiveGrid.tsx","../src/components/PlanCard.tsx","../src/components/PlanDetail.tsx","../src/components/AIToolsPanel.tsx","../src/components/LeadCaptureModal.tsx","../src/components/CategoryTiles.tsx","../src/components/FilterBar.tsx","../src/components/FeaturedRow.tsx","../src/types/index.ts","../src/components/StyleSwapButtons.tsx","../src/components/FloorPlanEditor.tsx","../src/components/SimilarPlans.tsx","../src/components/FavoriteButton.tsx","../src/api/client.ts","../src/hooks/useDesignVault.ts","../src/hooks/usePlans.ts","../src/hooks/useAIInteractions.ts","../src/hooks/useSession.ts","../src/utils/tracking.ts","../src/hooks/useLeadCapture.ts","../src/hooks/useFavorites.ts","../src/utils/cache.ts"],"names":["jsx","jsxs","text","createContext","useContext","useMemo","useState","useRef","useCallback","React","useEffect"],"mappings":"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","file":"index.js","sourcesContent":["import React from \"react\";\nimport type { DesignVaultProps } from \"../types\";\n\nexport const DesignVault: React.FC<DesignVaultProps> = ({ config, className }) => {\n  return (\n    <div className={`dv-root ${className ?? \"\"}`}>\n      <p>DesignVault: {config.builderSlug}</p>\n    </div>\n  );\n};\n","import React from \"react\";\nimport type { ArchiveGridProps } from \"../types\";\n\nexport const ArchiveGrid: React.FC<ArchiveGridProps> = ({\n  plans,\n  loading,\n  onPlanSelect,\n}) => {\n  if (loading) {\n    return <div className=\"dv-archive-grid dv-loading\">Loading...</div>;\n  }\n\n  return (\n    <div className=\"dv-archive-grid\">\n      {plans.map((plan) => (\n        <div key={plan.id} onClick={() => onPlanSelect(plan)}>\n          {plan.title}\n        </div>\n      ))}\n    </div>\n  );\n};\n","import React from \"react\";\nimport type { PlanCardProps } from \"../types\";\n\nexport const PlanCard: React.FC<PlanCardProps> = ({ plan, onSelect }) => {\n  return (\n    <div className=\"dv-plan-card\" onClick={() => onSelect(plan)}>\n      <div className=\"dv-plan-card__image\">\n        <img src={plan.image_url} alt={plan.title} />\n      </div>\n      <div className=\"dv-plan-card__info\">\n        <h3 className=\"dv-plan-card__name\">{plan.title}</h3>\n        <p className=\"dv-plan-card__specs\">\n          {plan.beds} bed &middot; {plan.baths} bath &middot;{\" \"}\n          {plan.area.toLocaleString()} sqft\n        </p>\n      </div>\n    </div>\n  );\n};\n","import React from \"react\";\nimport type { PlanDetailProps } from \"../types\";\n\nexport const PlanDetail: React.FC<PlanDetailProps> = ({ plan, onClose }) => {\n  return (\n    <div className=\"dv-plan-detail\">\n      <button className=\"dv-plan-detail__close\" onClick={onClose}>\n        Close\n      </button>\n      <h2 className=\"dv-plan-detail__name\">{plan.title}</h2>\n      <p className=\"dv-plan-detail__description\">{plan.description}</p>\n    </div>\n  );\n};\n","import React from \"react\";\nimport type { AIToolsPanelProps } from \"../types\";\n\nexport const AIToolsPanel: React.FC<AIToolsPanelProps> = ({ plan }) => {\n  return (\n    <div className=\"dv-ai-tools-panel\">\n      <h3 className=\"dv-ai-tools-panel__title\">AI Tools</h3>\n      <p>Customize {plan.title}</p>\n    </div>\n  );\n};\n","import React from \"react\";\nimport type { LeadCaptureModalProps } from \"../types\";\n\nexport const LeadCaptureModal: React.FC<LeadCaptureModalProps> = ({\n  open,\n  onClose,\n  planId,\n  planTitle,\n}) => {\n  if (!open) return null;\n\n  return (\n    <div className=\"dv-lead-capture-overlay\">\n      <div className=\"dv-lead-capture-modal\">\n        <button className=\"dv-lead-capture-modal__close\" onClick={onClose}>\n          Close\n        </button>\n        <h2 className=\"dv-lead-capture-modal__title\">Get Your Custom Plan</h2>\n        {planTitle && <p>Plan: {planTitle}</p>}\n        <form className=\"dv-lead-capture-modal__form\">\n          <input type=\"text\" placeholder=\"First Name\" data-plan-id={planId} />\n          <input type=\"text\" placeholder=\"Last Name\" />\n          <input type=\"email\" placeholder=\"Email\" />\n          <input type=\"tel\" placeholder=\"Phone\" />\n          <button type=\"submit\">Submit</button>\n        </form>\n      </div>\n    </div>\n  );\n};\n","import React from \"react\";\nimport type { CategoryTilesProps } from \"../types\";\n\nexport const CategoryTiles: React.FC<CategoryTilesProps> = ({\n  categories,\n  activeCategory,\n  onSelect,\n}) => {\n  return (\n    <div className=\"dv-category-tiles\">\n      {categories.map((cat) => (\n        <button\n          key={cat.slug}\n          className={`dv-category-tile ${activeCategory === cat.slug ? \"dv-category-tile--active\" : \"\"}`}\n          onClick={() =>\n            onSelect(activeCategory === cat.slug ? null : cat.slug)\n          }\n        >\n          <span className=\"dv-category-tile__name\">{cat.label}</span>\n          <span className=\"dv-category-tile__count\">{cat.count}</span>\n        </button>\n      ))}\n    </div>\n  );\n};\n","import React from \"react\";\nimport type { FilterBarProps } from \"../types\";\n\nexport const FilterBar: React.FC<FilterBarProps> = ({ filters, onChange }) => {\n  return (\n    <div className=\"dv-filter-bar\">\n      <select\n        className=\"dv-filter-bar__select\"\n        value={filters.bedrooms ?? \"\"}\n        onChange={(e) =>\n          onChange({\n            ...filters,\n            bedrooms: e.target.value ? Number(e.target.value) : null,\n          })\n        }\n      >\n        <option value=\"\">Beds</option>\n      </select>\n\n      <select\n        className=\"dv-filter-bar__select\"\n        value={filters.bathrooms ?? \"\"}\n        onChange={(e) =>\n          onChange({\n            ...filters,\n            bathrooms: e.target.value ? Number(e.target.value) : null,\n          })\n        }\n      >\n        <option value=\"\">Baths</option>\n      </select>\n\n      <select\n        className=\"dv-filter-bar__select\"\n        value={filters.style ?? \"\"}\n        onChange={(e) =>\n          onChange({\n            ...filters,\n            style: (e.target.value || null) as typeof filters.style,\n          })\n        }\n      >\n        <option value=\"\">Style</option>\n      </select>\n    </div>\n  );\n};\n","import React from \"react\";\nimport type { FeaturedRowProps } from \"../types\";\n\nexport const FeaturedRow: React.FC<FeaturedRowProps> = ({\n  plans,\n  onPlanSelect,\n}) => {\n  return (\n    <div className=\"dv-featured-row\">\n      <h2 className=\"dv-featured-row__title\">Featured Plans</h2>\n      <div className=\"dv-featured-row__scroll\">\n        {plans.map((plan) => (\n          <div\n            key={plan.id}\n            className=\"dv-featured-row__item\"\n            onClick={() => onPlanSelect(plan)}\n          >\n            {plan.title}\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n};\n","// ── Floor Plan (matches Supabase website_floor_plans) ────────\n\nexport type FloorPlanStyle =\n  | \"modern\"\n  | \"traditional\"\n  | \"rustic\"\n  | \"contemporary\"\n  | \"farmhouse\"\n  | \"hill_country\";\n\nexport type FloorPlanCategory =\n  | \"barndominium\"\n  | \"ranch\"\n  | \"estate\"\n  | \"cabin\"\n  | \"shop_house\"\n  | \"starter\";\n\nexport type PriceTier = \"economy\" | \"standard\" | \"luxury\";\n\nexport interface FloorPlan {\n  id: string;\n  title: string;\n  description: string | null;\n  beds: number;\n  baths: number;\n  area: number;\n  image_url: string;\n  floor_plan_url: string | null;\n  interior_urls: string[] | null;\n  features: string[];\n  style: FloorPlanStyle | null;\n  category: FloorPlanCategory | null;\n  price_tier: PriceTier | null;\n  tags: string[] | null;\n  featured: boolean;\n  click_count: number;\n  display_order: number;\n  created_at: string;\n}\n\n// ── Filters ──────────────────────────────────────────────────\n\nexport interface PlanFilters {\n  bedrooms: number | null;\n  bathrooms: number | null;\n  minArea: number | null;\n  maxArea: number | null;\n  style: FloorPlanStyle | null;\n  category: FloorPlanCategory | null;\n}\n\n// ── Session ──────────────────────────────────────────────────\n\nexport interface DesignSession {\n  id: string;\n  anonymousId: string;\n  planId: string;\n  builderSlug: string;\n  modifications: Modification[];\n  stylePref: string | null;\n  capturedAt: string | null;\n  contactId: string | null;\n}\n\n// ── Modification ─────────────────────────────────────────────\n\nexport interface Modification {\n  type: \"style_swap\" | \"floor_plan_edit\";\n  prompt: string | null;\n  stylePreset: string | null;\n  resultUrl: string;\n  originalUrl: string;\n  timestamp: string;\n}\n\n// ── Lead Capture ─────────────────────────────────────────────\n\nexport interface LeadCaptureData {\n  firstName: string;\n  lastName: string;\n  email: string;\n  phone: string;\n  planId: string;\n  planTitle: string;\n  planSpecs: {\n    beds: number;\n    baths: number;\n    area: number;\n  };\n  modifications: Modification[];\n  favorites: string[];\n  stylePref: string | null;\n  sessionDuration: number;\n  plansViewed: number;\n}\n\n// ── Style Presets ────────────────────────────────────────────\n\nexport interface StylePreset {\n  id: string;\n  label: string;\n  description: string;\n}\n\nexport const DEFAULT_STYLE_PRESETS: StylePreset[] = [\n  { id: \"modern\", label: \"Modern\", description: \"Clean lines, large windows, flat roofs\" },\n  { id: \"rustic\", label: \"Rustic\", description: \"Natural materials, wood beams, stone accents\" },\n  { id: \"hill_country\", label: \"Hill Country\", description: \"Texas limestone, metal roofing, wide porches\" },\n  { id: \"traditional\", label: \"Traditional\", description: \"Classic proportions, symmetrical facades\" },\n  { id: \"farmhouse\", label: \"Farmhouse\", description: \"Board-and-batten siding, wraparound porches\" },\n  { id: \"contemporary\", label: \"Contemporary\", description: \"Mixed materials, asymmetric design, open plans\" },\n];\n\n// ── AI Interaction ───────────────────────────────────────────\n\nexport interface AIInteractionResult {\n  success: boolean;\n  resultUrl: string | null;\n  cached: boolean;\n  error: string | null;\n  remainingFree: number;\n}\n\n// ── Config ───────────────────────────────────────────────────\n\nexport interface DesignVaultConfig {\n  builderSlug: string;\n  brandColor: string;\n  brandColorLight?: string;\n  ctaText?: string;\n  apiBaseUrl: string;\n  crmWebhookUrl?: string;\n  metaPixelId?: string;\n  trackingEndpoint?: string;\n  maxFreeInteractions?: number;\n  enableFloorPlanEdit?: boolean;\n  enableStyleSwap?: boolean;\n  enableFavorites?: boolean;\n  enableSimilarPlans?: boolean;\n  attribution?: {\n    show: boolean;\n    text: string;\n    url: string;\n  };\n}\n\n// ── Component Props ──────────────────────────────────────────\n\nexport interface DesignVaultProps {\n  config: DesignVaultConfig;\n  className?: string;\n}\n\nexport interface ArchiveGridProps {\n  plans: FloorPlan[];\n  loading?: boolean;\n  onPlanSelect: (plan: FloorPlan) => void;\n}\n\nexport interface PlanCardProps {\n  plan: FloorPlan;\n  onSelect: (plan: FloorPlan) => void;\n}\n\nexport interface PlanDetailProps {\n  plan: FloorPlan;\n  onClose: () => void;\n}\n\nexport interface AIToolsPanelProps {\n  plan: FloorPlan;\n}\n\nexport interface LeadCaptureModalProps {\n  open: boolean;\n  onClose: () => void;\n  planId?: string;\n  planTitle?: string;\n}\n\nexport interface CategoryTilesProps {\n  categories: { slug: string; label: string; count: number }[];\n  activeCategory: string | null;\n  onSelect: (category: string | null) => void;\n}\n\nexport interface FilterBarProps {\n  filters: PlanFilters;\n  onChange: (filters: PlanFilters) => void;\n}\n\nexport interface FeaturedRowProps {\n  plans: FloorPlan[];\n  onPlanSelect: (plan: FloorPlan) => void;\n}\n\nexport interface StyleSwapButtonsProps {\n  planId: string;\n  imageUrl: string;\n  onSwap: (preset: StylePreset) => void;\n}\n\nexport interface FloorPlanEditorProps {\n  planId: string;\n  imageUrl: string;\n}\n\nexport interface SimilarPlansProps {\n  currentPlan: FloorPlan;\n  plans: FloorPlan[];\n  onPlanSelect: (plan: FloorPlan) => void;\n}\n\nexport interface FavoriteButtonProps {\n  planId: string;\n  size?: \"sm\" | \"md\" | \"lg\";\n}\n","import React from \"react\";\nimport type { StyleSwapButtonsProps } from \"../types\";\nimport { DEFAULT_STYLE_PRESETS } from \"../types\";\n\nexport const StyleSwapButtons: React.FC<StyleSwapButtonsProps> = ({\n  planId: _planId,\n  imageUrl: _imageUrl,\n  onSwap,\n}) => {\n  return (\n    <div className=\"dv-style-swap-buttons\">\n      {DEFAULT_STYLE_PRESETS.map((preset) => (\n        <button\n          key={preset.id}\n          className=\"dv-style-swap-btn\"\n          onClick={() => onSwap(preset)}\n          title={preset.description}\n        >\n          {preset.label}\n        </button>\n      ))}\n    </div>\n  );\n};\n","import React from \"react\";\nimport type { FloorPlanEditorProps } from \"../types\";\n\nexport const FloorPlanEditor: React.FC<FloorPlanEditorProps> = ({\n  planId: _planId,\n  imageUrl: _imageUrl,\n}) => {\n  return (\n    <div className=\"dv-floor-plan-editor\">\n      <h3 className=\"dv-floor-plan-editor__title\">Edit Floor Plan</h3>\n      <textarea\n        className=\"dv-floor-plan-editor__input\"\n        placeholder=\"Describe changes to the floor plan...\"\n      />\n      <button className=\"dv-floor-plan-editor__submit\">Apply Changes</button>\n    </div>\n  );\n};\n","import React from \"react\";\nimport type { SimilarPlansProps } from \"../types\";\n\nexport const SimilarPlans: React.FC<SimilarPlansProps> = ({\n  currentPlan,\n  plans,\n  onPlanSelect,\n}) => {\n  const similar = plans.filter((p) => p.id !== currentPlan.id);\n\n  return (\n    <div className=\"dv-similar-plans\">\n      <h3 className=\"dv-similar-plans__title\">Similar Plans</h3>\n      <div className=\"dv-similar-plans__row\">\n        {similar.map((plan) => (\n          <div\n            key={plan.id}\n            className=\"dv-similar-plans__item\"\n            onClick={() => onPlanSelect(plan)}\n          >\n            {plan.title}\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n};\n","import React from \"react\";\nimport type { FavoriteButtonProps } from \"../types\";\n\nexport const FavoriteButton: React.FC<FavoriteButtonProps> = ({\n  planId: _planId,\n  size = \"md\",\n}) => {\n  return (\n    <button className={`dv-favorite-btn dv-favorite-btn--${size}`}>\n      <span className=\"dv-favorite-btn__icon\" />\n    </button>\n  );\n};\n","import type {\n  AIInteractionResult,\n  FloorPlan,\n  LeadCaptureData,\n  PlanFilters,\n} from \"../types\";\n\nexport class DesignVaultAPI {\n  private baseUrl: string;\n\n  constructor(apiBaseUrl: string) {\n    this.baseUrl = apiBaseUrl.replace(/\\/$/, \"\");\n  }\n\n  // ── Plans ────────────────────────────────────────────────────\n\n  async getPlans(filters?: PlanFilters): Promise<FloorPlan[]> {\n    const params = new URLSearchParams();\n\n    if (filters) {\n      if (filters.bedrooms !== null && filters.bedrooms !== undefined) {\n        params.set(\"bedrooms\", String(filters.bedrooms));\n      }\n      if (filters.bathrooms !== null && filters.bathrooms !== undefined) {\n        params.set(\"bathrooms\", String(filters.bathrooms));\n      }\n      if (filters.minArea !== null && filters.minArea !== undefined) {\n        params.set(\"minArea\", String(filters.minArea));\n      }\n      if (filters.maxArea !== null && filters.maxArea !== undefined) {\n        params.set(\"maxArea\", String(filters.maxArea));\n      }\n      if (filters.style !== null && filters.style !== undefined) {\n        params.set(\"style\", filters.style);\n      }\n      if (filters.category !== null && filters.category !== undefined) {\n        params.set(\"category\", filters.category);\n      }\n    }\n\n    const query = params.toString();\n    const url = `${this.baseUrl}/api/plans${query ? `?${query}` : \"\"}`;\n\n    return this.get<FloorPlan[]>(url);\n  }\n\n  async getPlan(id: string): Promise<FloorPlan> {\n    return this.get<FloorPlan>(`${this.baseUrl}/api/plans/${id}`);\n  }\n\n  // ── Tracking ─────────────────────────────────────────────────\n\n  async trackClick(planId: string): Promise<void> {\n    await this.post<void>(`${this.baseUrl}/api/plans/${planId}/click`, {});\n  }\n\n  // ── AI ───────────────────────────────────────────────────────\n\n  async styleSwap(\n    planId: string,\n    preset: string,\n    sessionId: string\n  ): Promise<AIInteractionResult> {\n    return this.post<AIInteractionResult>(\n      `${this.baseUrl}/api/style-swap`,\n      { planId, preset, sessionId }\n    );\n  }\n\n  async floorPlanEdit(\n    planId: string,\n    prompt: string,\n    sessionId: string,\n    currentUrl?: string\n  ): Promise<AIInteractionResult> {\n    return this.post<AIInteractionResult>(\n      `${this.baseUrl}/api/floor-plan-edit`,\n      { planId, prompt, sessionId, currentUrl }\n    );\n  }\n\n  async enhancePrompt(\n    prompt: string,\n    imageUrl: string\n  ): Promise<{ enhancedPrompt: string }> {\n    return this.post<{ enhancedPrompt: string }>(\n      `${this.baseUrl}/api/enhance-prompt`,\n      { prompt, imageUrl }\n    );\n  }\n\n  // ── Lead Capture ─────────────────────────────────────────────\n\n  async saveDesign(\n    data: LeadCaptureData,\n    sessionId: string,\n    builderSlug: string\n  ): Promise<{ success: boolean }> {\n    return this.post<{ success: boolean }>(\n      `${this.baseUrl}/api/save-design`,\n      { ...data, sessionId, builderSlug }\n    );\n  }\n\n  // ── Sessions ─────────────────────────────────────────────────\n\n  async createSession(\n    planId: string,\n    builderSlug: string,\n    anonymousId: string\n  ): Promise<{ sessionId: string }> {\n    return this.post<{ sessionId: string }>(\n      `${this.baseUrl}/api/sessions`,\n      { planId, builderSlug, anonymousId }\n    );\n  }\n\n  // ── Internal helpers ─────────────────────────────────────────\n\n  private async get<T>(url: string): Promise<T> {\n    try {\n      const res = await fetch(url);\n      if (!res.ok) {\n        const body = await res.text();\n        throw new Error(\n          `GET ${url} failed (${res.status}): ${body}`\n        );\n      }\n      return (await res.json()) as T;\n    } catch (err) {\n      if (err instanceof Error) throw err;\n      throw new Error(`GET ${url} failed: ${String(err)}`);\n    }\n  }\n\n  private async post<T>(url: string, body: unknown): Promise<T> {\n    try {\n      const res = await fetch(url, {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(body),\n      });\n      if (!res.ok) {\n        const text = await res.text();\n        throw new Error(\n          `POST ${url} failed (${res.status}): ${text}`\n        );\n      }\n      // Some endpoints (trackClick) may return 204 with no body\n      const text = await res.text();\n      if (!text) return undefined as T;\n      return JSON.parse(text) as T;\n    } catch (err) {\n      if (err instanceof Error) throw err;\n      throw new Error(`POST ${url} failed: ${String(err)}`);\n    }\n  }\n}\n","import React, {\n  createContext,\n  useCallback,\n  useContext,\n  useMemo,\n  useRef,\n  useState,\n} from \"react\";\nimport { DesignVaultAPI } from \"../api/client\";\nimport type { DesignVaultConfig, FloorPlan, Modification } from \"../types\";\n\n// ── Anonymous ID ─────────────────────────────────────────────\n\nconst ANON_ID_KEY = \"dv-anonymous-id\";\n\nfunction generateId(): string {\n  if (typeof crypto !== \"undefined\" && typeof crypto.randomUUID === \"function\") {\n    return crypto.randomUUID();\n  }\n  return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, (c) => {\n    const r = (Math.random() * 16) | 0;\n    return (c === \"x\" ? r : (r & 0x3) | 0x8).toString(16);\n  });\n}\n\nfunction getOrCreateAnonymousId(): string {\n  if (typeof window === \"undefined\") return generateId();\n  try {\n    const existing = localStorage.getItem(ANON_ID_KEY);\n    if (existing) return existing;\n    const id = generateId();\n    localStorage.setItem(ANON_ID_KEY, id);\n    return id;\n  } catch {\n    return generateId();\n  }\n}\n\n// ── Context ──────────────────────────────────────────────────\n\nexport interface DesignVaultContextValue {\n  config: DesignVaultConfig;\n  api: DesignVaultAPI;\n  anonymousId: string;\n  sessionStartTime: number;\n\n  // Lead capture gate\n  isCaptured: boolean;\n  setCaptured: (captured: boolean) => void;\n\n  // Session tracking (shared across hooks)\n  sessionId: string | null;\n  setSessionId: (id: string | null) => void;\n  modifications: Modification[];\n  addModification: (mod: Modification) => void;\n  plansViewed: string[];\n  addPlanViewed: (planId: string) => void;\n  currentPlan: FloorPlan | null;\n  setCurrentPlan: (plan: FloorPlan | null) => void;\n  stylePref: string | null;\n  setStylePref: (pref: string | null) => void;\n}\n\nexport const DesignVaultContext =\n  createContext<DesignVaultContextValue | null>(null);\n\nexport function useDesignVaultContext(): DesignVaultContextValue {\n  const ctx = useContext(DesignVaultContext);\n  if (!ctx) {\n    throw new Error(\n      \"useDesignVaultContext must be used within a DesignVaultProvider\"\n    );\n  }\n  return ctx;\n}\n\n// ── Provider ─────────────────────────────────────────────────\n\nexport interface DesignVaultProviderProps {\n  config: DesignVaultConfig;\n  children: React.ReactNode;\n}\n\nexport function DesignVaultProvider({\n  config,\n  children,\n}: DesignVaultProviderProps) {\n  const api = useMemo(\n    () => new DesignVaultAPI(config.apiBaseUrl),\n    [config.apiBaseUrl]\n  );\n\n  const [anonymousId] = useState(getOrCreateAnonymousId);\n  const sessionStartRef = useRef(Date.now());\n\n  const [isCaptured, setCaptured] = useState(false);\n  const [sessionId, setSessionId] = useState<string | null>(null);\n  const [modifications, setModifications] = useState<Modification[]>([]);\n  const [plansViewed, setPlansViewed] = useState<string[]>([]);\n  const [currentPlan, setCurrentPlan] = useState<FloorPlan | null>(null);\n  const [stylePref, setStylePref] = useState<string | null>(null);\n\n  const addModification = useCallback((mod: Modification) => {\n    setModifications((prev) => [...prev, mod]);\n  }, []);\n\n  const addPlanViewed = useCallback((planId: string) => {\n    setPlansViewed((prev) =>\n      prev.includes(planId) ? prev : [...prev, planId]\n    );\n  }, []);\n\n  const value = useMemo<DesignVaultContextValue>(\n    () => ({\n      config,\n      api,\n      anonymousId,\n      sessionStartTime: sessionStartRef.current,\n      isCaptured,\n      setCaptured,\n      sessionId,\n      setSessionId,\n      modifications,\n      addModification,\n      plansViewed,\n      addPlanViewed,\n      currentPlan,\n      setCurrentPlan,\n      stylePref,\n      setStylePref,\n    }),\n    [\n      config,\n      api,\n      anonymousId,\n      isCaptured,\n      sessionId,\n      modifications,\n      plansViewed,\n      currentPlan,\n      stylePref,\n      addModification,\n      addPlanViewed,\n    ]\n  );\n\n  return React.createElement(\n    DesignVaultContext.Provider,\n    { value },\n    children\n  );\n}\n","import { useCallback, useEffect, useMemo, useState } from \"react\";\nimport { useDesignVaultContext } from \"./useDesignVault\";\nimport type { FloorPlan, FloorPlanCategory, FloorPlanStyle, PlanFilters } from \"../types\";\n\nconst EMPTY_FILTERS: PlanFilters = {\n  bedrooms: null,\n  bathrooms: null,\n  minArea: null,\n  maxArea: null,\n  style: null,\n  category: null,\n};\n\nexport function usePlans(initialFilters?: PlanFilters) {\n  const { api } = useDesignVaultContext();\n\n  const [plans, setPlans] = useState<FloorPlan[]>([]);\n  const [filters, setFilters] = useState<PlanFilters>(\n    initialFilters ?? EMPTY_FILTERS\n  );\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  // Fetch all plans once on mount\n  useEffect(() => {\n    let cancelled = false;\n    setLoading(true);\n\n    api\n      .getPlans()\n      .then((data) => {\n        if (!cancelled) {\n          setPlans(data);\n          setError(null);\n        }\n      })\n      .catch((err) => {\n        if (!cancelled) {\n          setError(err instanceof Error ? err.message : String(err));\n        }\n      })\n      .finally(() => {\n        if (!cancelled) setLoading(false);\n      });\n\n    return () => {\n      cancelled = true;\n    };\n  }, [api]);\n\n  // Client-side filtering for instant response\n  const filteredPlans = useMemo(() => {\n    return plans.filter((plan) => {\n      if (filters.bedrooms !== null && plan.beds !== filters.bedrooms)\n        return false;\n      if (filters.bathrooms !== null && plan.baths !== filters.bathrooms)\n        return false;\n      if (filters.minArea !== null && plan.area < filters.minArea)\n        return false;\n      if (filters.maxArea !== null && plan.area > filters.maxArea)\n        return false;\n      if (filters.style !== null && plan.style !== filters.style) return false;\n      if (filters.category !== null && plan.category !== filters.category)\n        return false;\n      return true;\n    });\n  }, [plans, filters]);\n\n  // Featured: featured === true, sorted by click_count desc, limit 6\n  const featuredPlans = useMemo(() => {\n    return plans\n      .filter((p) => p.featured)\n      .sort((a, b) => b.click_count - a.click_count)\n      .slice(0, 6);\n  }, [plans]);\n\n  // Recent: sorted by created_at desc, limit 4\n  const recentPlans = useMemo(() => {\n    return [...plans]\n      .sort(\n        (a, b) =>\n          new Date(b.created_at).getTime() - new Date(a.created_at).getTime()\n      )\n      .slice(0, 4);\n  }, [plans]);\n\n  // ── Derived filter options ─────────────────────────────────\n\n  const uniqueBedrooms = useMemo(\n    () => [...new Set(plans.map((p) => p.beds))].sort((a, b) => a - b),\n    [plans]\n  );\n\n  const uniqueBathrooms = useMemo(\n    () => [...new Set(plans.map((p) => p.baths))].sort((a, b) => a - b),\n    [plans]\n  );\n\n  const areaRange = useMemo(() => {\n    if (plans.length === 0) return { min: 0, max: 0 };\n    const areas = plans.map((p) => p.area);\n    return { min: Math.min(...areas), max: Math.max(...areas) };\n  }, [plans]);\n\n  const uniqueStyles = useMemo(\n    () =>\n      [\n        ...new Set(plans.map((p) => p.style).filter(Boolean)),\n      ] as FloorPlanStyle[],\n    [plans]\n  );\n\n  const uniqueCategories = useMemo(\n    () =>\n      [\n        ...new Set(plans.map((p) => p.category).filter(Boolean)),\n      ] as FloorPlanCategory[],\n    [plans]\n  );\n\n  const clearFilters = useCallback(() => setFilters(EMPTY_FILTERS), []);\n\n  return {\n    plans,\n    filteredPlans,\n    featuredPlans,\n    recentPlans,\n    loading,\n    error,\n    filters,\n    setFilters,\n    clearFilters,\n    uniqueBedrooms,\n    uniqueBathrooms,\n    areaRange,\n    uniqueStyles,\n    uniqueCategories,\n  };\n}\n","import { useCallback, useState } from \"react\";\nimport { useDesignVaultContext } from \"./useDesignVault\";\nimport type { AIInteractionResult } from \"../types\";\n\nexport function useAIInteractions() {\n  const {\n    api,\n    config,\n    isCaptured,\n    anonymousId,\n    sessionId,\n    currentPlan,\n    addModification,\n  } = useDesignVaultContext();\n\n  const maxFree = config.maxFreeInteractions ?? 1;\n  const hardLimit = maxFree + 3;\n\n  const [isProcessing, setIsProcessing] = useState(false);\n  const [lastResult, setLastResult] = useState<AIInteractionResult | null>(\n    null\n  );\n  const [interactionCount, setInteractionCount] = useState(0);\n  const [error, setError] = useState<string | null>(null);\n\n  const needsCapture = interactionCount >= maxFree && !isCaptured;\n\n  const effectiveSessionId = sessionId ?? anonymousId;\n\n  const handleStyleSwap = useCallback(\n    async (\n      planId: string,\n      preset: string\n    ): Promise<AIInteractionResult | null> => {\n      if (interactionCount >= hardLimit) {\n        setError(\"Interaction limit reached\");\n        return null;\n      }\n\n      setIsProcessing(true);\n      setError(null);\n\n      try {\n        const result = await api.styleSwap(\n          planId,\n          preset,\n          effectiveSessionId\n        );\n        setLastResult(result);\n        setInteractionCount((c) => c + 1);\n\n        if (result.success && result.resultUrl) {\n          addModification({\n            type: \"style_swap\",\n            prompt: null,\n            stylePreset: preset,\n            resultUrl: result.resultUrl,\n            originalUrl: currentPlan?.image_url ?? \"\",\n            timestamp: new Date().toISOString(),\n          });\n        }\n\n        return result;\n      } catch (err) {\n        const msg = err instanceof Error ? err.message : String(err);\n        setError(msg);\n        return null;\n      } finally {\n        setIsProcessing(false);\n      }\n    },\n    [\n      api,\n      effectiveSessionId,\n      interactionCount,\n      hardLimit,\n      addModification,\n      currentPlan?.image_url,\n    ]\n  );\n\n  const handleFloorPlanEdit = useCallback(\n    async (\n      planId: string,\n      prompt: string,\n      currentUrl?: string\n    ): Promise<AIInteractionResult | null> => {\n      if (interactionCount >= hardLimit) {\n        setError(\"Interaction limit reached\");\n        return null;\n      }\n\n      setIsProcessing(true);\n      setError(null);\n\n      try {\n        const result = await api.floorPlanEdit(\n          planId,\n          prompt,\n          effectiveSessionId,\n          currentUrl\n        );\n        setLastResult(result);\n        setInteractionCount((c) => c + 1);\n\n        if (result.success && result.resultUrl) {\n          addModification({\n            type: \"floor_plan_edit\",\n            prompt,\n            stylePreset: null,\n            resultUrl: result.resultUrl,\n            originalUrl: currentUrl ?? currentPlan?.floor_plan_url ?? \"\",\n            timestamp: new Date().toISOString(),\n          });\n        }\n\n        return result;\n      } catch (err) {\n        const msg = err instanceof Error ? err.message : String(err);\n        setError(msg);\n        return null;\n      } finally {\n        setIsProcessing(false);\n      }\n    },\n    [\n      api,\n      effectiveSessionId,\n      interactionCount,\n      hardLimit,\n      addModification,\n      currentPlan?.floor_plan_url,\n    ]\n  );\n\n  const handleEnhancePrompt = useCallback(\n    async (\n      prompt: string,\n      imageUrl: string\n    ): Promise<string | null> => {\n      setError(null);\n\n      try {\n        const { enhancedPrompt } = await api.enhancePrompt(prompt, imageUrl);\n        return enhancedPrompt;\n      } catch (err) {\n        const msg = err instanceof Error ? err.message : String(err);\n        setError(msg);\n        return null;\n      }\n    },\n    [api]\n  );\n\n  return {\n    handleStyleSwap,\n    handleFloorPlanEdit,\n    handleEnhancePrompt,\n    isProcessing,\n    lastResult,\n    needsCapture,\n    interactionCount,\n    error,\n  };\n}\n","import { useCallback, useMemo } from \"react\";\nimport { useDesignVaultContext } from \"./useDesignVault\";\nimport type { DesignSession, FloorPlan, Modification } from \"../types\";\n\nexport function useSession() {\n  const {\n    api,\n    config,\n    anonymousId,\n    sessionStartTime,\n    isCaptured,\n    sessionId,\n    setSessionId,\n    modifications,\n    addModification: ctxAddModification,\n    plansViewed,\n    addPlanViewed,\n    currentPlan,\n    setCurrentPlan: ctxSetCurrentPlan,\n    stylePref,\n  } = useDesignVaultContext();\n\n  // Assemble a DesignSession from context state\n  const session = useMemo<DesignSession | null>(() => {\n    if (!sessionId) return null;\n    return {\n      id: sessionId,\n      anonymousId,\n      planId: currentPlan?.id ?? \"\",\n      builderSlug: config.builderSlug,\n      modifications,\n      stylePref,\n      capturedAt: isCaptured ? new Date().toISOString() : null,\n      contactId: null,\n    };\n  }, [\n    sessionId,\n    anonymousId,\n    currentPlan?.id,\n    config.builderSlug,\n    modifications,\n    stylePref,\n    isCaptured,\n  ]);\n\n  const addModification = useCallback(\n    (mod: Modification) => {\n      ctxAddModification(mod);\n    },\n    [ctxAddModification]\n  );\n\n  // Select a plan: store it, track the view, call trackClick, create session\n  const setCurrentPlan = useCallback(\n    async (plan: FloorPlan) => {\n      ctxSetCurrentPlan(plan);\n      addPlanViewed(plan.id);\n\n      // Track click (fire-and-forget)\n      api.trackClick(plan.id).catch(() => {});\n\n      // Create session on first plan selection\n      if (!sessionId) {\n        try {\n          const { sessionId: newId } = await api.createSession(\n            plan.id,\n            config.builderSlug,\n            anonymousId\n          );\n          setSessionId(newId);\n        } catch {\n          // Non-critical — interactions will fall back to anonymousId\n        }\n      }\n    },\n    [\n      api,\n      config.builderSlug,\n      anonymousId,\n      sessionId,\n      setSessionId,\n      ctxSetCurrentPlan,\n      addPlanViewed,\n    ]\n  );\n\n  const getSessionDuration = useCallback(() => {\n    return Math.floor((Date.now() - sessionStartTime) / 1000);\n  }, [sessionStartTime]);\n\n  return {\n    session,\n    addModification,\n    setCurrentPlan,\n    plansViewed,\n    getSessionDuration,\n  };\n}\n","export function trackPageView(\n  _builderSlug: string,\n  _anonymousId: string,\n  _trackingEndpoint?: string\n): void {\n  // TODO: implement page view tracking\n}\n\nexport function trackEvent(\n  _event: string,\n  _properties: Record<string, unknown>,\n  _trackingEndpoint?: string\n): void {\n  // TODO: implement event tracking\n}\n\nexport function fireMetaPixelEvent(\n  _pixelId: string,\n  _eventName: string,\n  _params?: Record<string, unknown>\n): void {\n  // TODO: implement Meta pixel event firing\n}\n","import { useCallback, useState } from \"react\";\nimport { useDesignVaultContext } from \"./useDesignVault\";\nimport { fireMetaPixelEvent } from \"../utils/tracking\";\nimport type { LeadCaptureData } from \"../types\";\n\nconst FAVORITES_KEY = \"dv-favorites\";\n\nfunction readFavoritesFromStorage(): string[] {\n  if (typeof window === \"undefined\") return [];\n  try {\n    const stored = localStorage.getItem(FAVORITES_KEY);\n    return stored ? JSON.parse(stored) : [];\n  } catch {\n    return [];\n  }\n}\n\nexport function useLeadCapture() {\n  const {\n    api,\n    config,\n    anonymousId,\n    sessionStartTime,\n    sessionId,\n    modifications,\n    plansViewed,\n    currentPlan,\n    stylePref,\n    setCaptured,\n  } = useDesignVaultContext();\n\n  const [isOpen, setIsOpen] = useState(false);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [submitted, setSubmitted] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  const openCapture = useCallback(() => setIsOpen(true), []);\n  const closeCapture = useCallback(() => setIsOpen(false), []);\n\n  const submitCapture = useCallback(\n    async (formData: {\n      firstName: string;\n      lastName: string;\n      email: string;\n      phone: string;\n    }) => {\n      setIsSubmitting(true);\n      setError(null);\n\n      const sessionDuration = Math.floor(\n        (Date.now() - sessionStartTime) / 1000\n      );\n\n      const data: LeadCaptureData = {\n        firstName: formData.firstName,\n        lastName: formData.lastName,\n        email: formData.email,\n        phone: formData.phone,\n        planId: currentPlan?.id ?? \"\",\n        planTitle: currentPlan?.title ?? \"\",\n        planSpecs: {\n          beds: currentPlan?.beds ?? 0,\n          baths: currentPlan?.baths ?? 0,\n          area: currentPlan?.area ?? 0,\n        },\n        modifications,\n        favorites: readFavoritesFromStorage(),\n        stylePref,\n        sessionDuration,\n        plansViewed: plansViewed.length,\n      };\n\n      try {\n        await api.saveDesign(\n          data,\n          sessionId ?? anonymousId,\n          config.builderSlug\n        );\n\n        setSubmitted(true);\n        setCaptured(true);\n        setIsOpen(false);\n\n        // Fire Meta pixel Lead event if configured\n        if (config.metaPixelId) {\n          fireMetaPixelEvent(config.metaPixelId, \"Lead\", {\n            content_name: currentPlan?.title,\n            content_ids: [currentPlan?.id],\n            content_category: currentPlan?.category,\n            value: currentPlan?.area,\n          });\n        }\n      } catch (err) {\n        const msg = err instanceof Error ? err.message : String(err);\n        setError(msg);\n      } finally {\n        setIsSubmitting(false);\n      }\n    },\n    [\n      api,\n      config.builderSlug,\n      config.metaPixelId,\n      anonymousId,\n      sessionStartTime,\n      sessionId,\n      modifications,\n      plansViewed.length,\n      currentPlan,\n      stylePref,\n      setCaptured,\n    ]\n  );\n\n  return {\n    isOpen,\n    openCapture,\n    closeCapture,\n    submitCapture,\n    isSubmitting,\n    submitted,\n    error,\n  };\n}\n","import { useCallback, useEffect, useState } from \"react\";\n\nconst STORAGE_KEY = \"dv-favorites\";\n\nfunction readFavorites(): string[] {\n  if (typeof window === \"undefined\") return [];\n  try {\n    const stored = localStorage.getItem(STORAGE_KEY);\n    return stored ? JSON.parse(stored) : [];\n  } catch {\n    return [];\n  }\n}\n\nfunction writeFavorites(ids: string[]): void {\n  try {\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(ids));\n  } catch {\n    // localStorage may be full or disabled\n  }\n}\n\nexport function useFavorites() {\n  const [favorites, setFavorites] = useState<string[]>(readFavorites);\n\n  // Persist to localStorage whenever favorites change\n  useEffect(() => {\n    writeFavorites(favorites);\n  }, [favorites]);\n\n  const toggleFavorite = useCallback((planId: string) => {\n    setFavorites((prev) =>\n      prev.includes(planId)\n        ? prev.filter((id) => id !== planId)\n        : [...prev, planId]\n    );\n  }, []);\n\n  const isFavorite = useCallback(\n    (planId: string) => favorites.includes(planId),\n    [favorites]\n  );\n\n  return {\n    favorites,\n    toggleFavorite,\n    isFavorite,\n    favoritesCount: favorites.length,\n  };\n}\n","interface CacheEntry<T> {\n  data: T;\n  expiresAt: number;\n}\n\nconst DEFAULT_TTL_MS = 5 * 60 * 1000; // 5 minutes\n\nexport class ClientCache {\n  private store = new Map<string, CacheEntry<unknown>>();\n  private ttl: number;\n\n  constructor(ttlMs: number = DEFAULT_TTL_MS) {\n    this.ttl = ttlMs;\n  }\n\n  get<T>(key: string): T | null {\n    const entry = this.store.get(key);\n    if (!entry) return null;\n    if (Date.now() > entry.expiresAt) {\n      this.store.delete(key);\n      return null;\n    }\n    return entry.data as T;\n  }\n\n  set<T>(key: string, data: T): void {\n    this.store.set(key, { data, expiresAt: Date.now() + this.ttl });\n  }\n\n  invalidate(key: string): void {\n    this.store.delete(key);\n  }\n\n  clear(): void {\n    this.store.clear();\n  }\n}\n"]}